/* ----------------------------------------------------------------------------
 * This file was automatically generated by SWIG (http://www.swig.org).
 * Version 1.3.35
 *
 * Do not make changes to this file unless you know what you are doing--modify
 * the SWIG interface file instead.
 * ----------------------------------------------------------------------------- */

package be.belgium.eid;
import java.util.*;
public class BEID_ReaderContext extends BEID_Object {
  private long swigCPtr;

  protected BEID_ReaderContext(long cPtr, boolean cMemoryOwn) {
    super(beidlibJava_WrapperJNI.SWIGBEID_ReaderContextUpcast(cPtr), cMemoryOwn);
    swigCPtr = cPtr;
  }

  protected static long getCPtr(BEID_ReaderContext obj) {
    return (obj == null) ? 0 : obj.swigCPtr;
  }

  protected void finalize() {
    delete();
  }

  public synchronized void delete() {
    if(swigCPtr != 0 && swigCMemOwn) {
      swigCMemOwn = false;
      beidlibJava_WrapperJNI.delete_BEID_ReaderContext(swigCPtr);
    }
    swigCPtr = 0;
    super.delete();
  }

	private static int		m_counter = 0;							// static counter to keep the nr of SetEventCallback we've done
	private static HashMap	m_CallbackContainer = new HashMap();	// static map to keep the data for each callback
	
	//------------------------------------------------------------
	// this function is called from C++ wrapper side as callback function.
	// It will receive the key in the map, from which it can recover
	// the callback helper class. This helper class contains the callback object
	// and the data object for this callback.
	// As such, the callback class will call, via the interface function of the callback object,
	// the Java application. The data object is passed as an argument.
	// In the application, this data from the dataobject can be read for whatever reason.
	//------------------------------------------------------------
	public static void doJavaCallBack( int iKey, long lRet, long ulState )
	{
		Integer key = new Integer(iKey);
		CallbackHelper callbackHelper = (CallbackHelper)m_CallbackContainer.get( key );
		callbackHelper.m_callbackObject.getEvent(lRet, ulState, callbackHelper.m_callbackData);
	}

  public BEID_ReaderContext(BEID_FileType fileType, String fileName) {
    this(beidlibJava_WrapperJNI.new_BEID_ReaderContext__SWIG_0(fileType.swigValue(), fileName), true);
  }

  public BEID_ReaderContext(BEID_FileType fileType, BEID_ByteArray data) {
    this(beidlibJava_WrapperJNI.new_BEID_ReaderContext__SWIG_1(fileType.swigValue(), BEID_ByteArray.getCPtr(data), data), true);
  }

  public BEID_ReaderContext(BEID_RawData_Eid data) {
    this(beidlibJava_WrapperJNI.new_BEID_ReaderContext__SWIG_2(BEID_RawData_Eid.getCPtr(data), data), true);
  }

  public BEID_ReaderContext(BEID_RawData_Sis data) {
    this(beidlibJava_WrapperJNI.new_BEID_ReaderContext__SWIG_3(BEID_RawData_Sis.getCPtr(data), data), true);
  }

  public String getName() throws BEID_Exception {
    return beidlibJava_WrapperJNI.BEID_ReaderContext_getName(swigCPtr, this);
  }

  public boolean isCardPresent() throws BEID_Exception {
    return beidlibJava_WrapperJNI.BEID_ReaderContext_isCardPresent(swigCPtr, this);
  }

  public void releaseCard(boolean bAllReference) throws BEID_Exception {
    beidlibJava_WrapperJNI.BEID_ReaderContext_releaseCard__SWIG_0(swigCPtr, this, bAllReference);
  }

  public void releaseCard() throws BEID_Exception {
    beidlibJava_WrapperJNI.BEID_ReaderContext_releaseCard__SWIG_1(swigCPtr, this);
  }

  public boolean isCardChanged(BEID_ulwrapper ulOldId) throws BEID_Exception {
	  long pID = beidlibJava_WrapperJNI.new_ulongp();				// get a C++ ptr
	  beidlibJava_WrapperJNI.ulongp_assign(pID,ulOldId.m_long);
	  boolean retval = beidlibJava_WrapperJNI.BEID_ReaderContext_isCardChanged(swigCPtr, this, pID);
	  ulOldId.m_long = beidlibJava_WrapperJNI.ulongp_value(pID);
	  beidlibJava_WrapperJNI.delete_ulongp(pID);
	  return retval;
}

  public BEID_CardType getCardType() throws BEID_Exception {
    return BEID_CardType.swigToEnum(beidlibJava_WrapperJNI.BEID_ReaderContext_getCardType(swigCPtr, this));
  }

  public BEID_Card getCard() throws BEID_Exception {
    return new BEID_Card(beidlibJava_WrapperJNI.BEID_ReaderContext_getCard(swigCPtr, this), false);
  }

  public BEID_EIDCard getEIDCard() throws BEID_Exception {
    return new BEID_EIDCard(beidlibJava_WrapperJNI.BEID_ReaderContext_getEIDCard(swigCPtr, this), false);
  }

  public BEID_KidsCard getKidsCard() throws BEID_Exception {
    return new BEID_KidsCard(beidlibJava_WrapperJNI.BEID_ReaderContext_getKidsCard(swigCPtr, this), false);
  }

  public BEID_ForeignerCard getForeignerCard() throws BEID_Exception {
    return new BEID_ForeignerCard(beidlibJava_WrapperJNI.BEID_ReaderContext_getForeignerCard(swigCPtr, this), false);
  }

  public BEID_SISCard getSISCard() throws BEID_Exception {
    return new BEID_SISCard(beidlibJava_WrapperJNI.BEID_ReaderContext_getSISCard(swigCPtr, this), false);
  }

  public long SetEventCallback(Callback callback, Object pvRef) throws BEID_Exception { 
	m_counter++;
	Integer key = new Integer(m_counter);
	m_CallbackContainer.put(key, new CallbackHelper(callback, pvRef));
	long result = beidlibJava_WrapperJNI.BEID_ReaderContext_SetEventCallback(swigCPtr, this, 0, m_counter);
	return result; 
}

  public void StopEventCallback(long ulHandle) throws BEID_Exception { 
    beidlibJava_WrapperJNI.BEID_ReaderContext_StopEventCallback(swigCPtr, this, ulHandle);
    
	Set CallbackContainerKeys = m_CallbackContainer.keySet();
	Iterator itr = CallbackContainerKeys.iterator();
	
	while (itr.hasNext())
	{
		Integer		   key		= (Integer)itr.next();
		CallbackHelper cbHelper = (CallbackHelper)m_CallbackContainer.get(key);
		
		if (cbHelper.m_handle == ulHandle)
		{
			m_CallbackContainer.remove(key);
			break;
		}
	}
}

  public void BeginTransaction() throws BEID_Exception {
    beidlibJava_WrapperJNI.BEID_ReaderContext_BeginTransaction(swigCPtr, this);
  }

  public void EndTransaction() throws BEID_Exception {
    beidlibJava_WrapperJNI.BEID_ReaderContext_EndTransaction(swigCPtr, this);
  }

  public boolean isVirtualReader() throws BEID_Exception {
    return beidlibJava_WrapperJNI.BEID_ReaderContext_isVirtualReader(swigCPtr, this);
  }

}
